(window.webpackJsonpapp_store=window.webpackJsonpapp_store||[]).push([[18],{"7Jv9":function(e,t,a){"use strict";a.r(t);var n=a("uDfI"),r=a("cDcd"),i=a.n(r),o=a("gXpX"),l=a("itJ/"),s=a("rwsp"),p=a("lILN"),c=a("VtSi"),d=a.n(c),u=a("/Ybj"),m=a("5PxR"),b=a.n(m),C=a("O94r"),E=a.n(C),f=a("sY6Z"),g=a("fGTf"),v=a("4a4m"),_=a("uDEQ"),A=a.n(_),h=a("ooBK"),V=a("dvi7"),y=a("iVqo"),I=a("cNCx");a("YajT");function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(s){r=!0,i=s}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var w=i.a.memo(function(e){var t=e.isEditable,a=void 0!==t&&t,n=e.imgSrc,r=e.assetToken,o=e.id,s=e.assetDeliveryState,p=e.saveErrors,c=void 0===p?[]:p,d=e.onDelete,u=e.isLocked,m=s||{},b=m.state,C=m.errors,E=void 0===C?[]:C,f=O(i.a.useState(!1),2),g=f[0],v=f[1],_=O(i.a.useState(!1),2),A=_[0],h=_[1],V=O(i.a.useState(null),2),w=V[0],S=V[1],j=n&&r===n,L=!j&&Object(I.g)({assetToken:r,width:1350,height:900}),x=!j&&Object(I.g)({assetToken:r,width:1800,height:1200}),T=!n&&!L&&!A,N=E.concat(c);A&&N.push({code:"IMG_LOAD"});var k=i.a.createElement("img",{alt:"App Clip Header",src:L||n,onLoad:function(){v(!0)},onError:function(){h(!0),v(!1)},style:{filter:u?"grayscale(100%)":"none",opacity:u?"0.3":"1"}});return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"header-image-mask___2CFnL"},(!j||N.length>0)&&a&&!u&&i.a.createElement(l.j,{onClick:d,className:"delete-icon-area___1t3uI"},i.a.createElement("span",{className:"delete-button___1_avf"})),i.a.createElement(y.a,{initialDrop:j,processing:T,status:b,assetId:o,errors:N}),i.a.createElement("div",{style:{display:g?"block":"none",boxShadow:g?"inset 0 0 1px rgba(0, 0, 0, 0.2)":"none"}},(L||n)&&!T&&i.a.createElement(i.a.Fragment,null,x&&!u&&i.a.createElement(l.j,{onClick:function(){return S(0)}},k),(!x||u)&&k))),x&&i.a.createElement(l.v,{items:[i.a.createElement("img",{src:x,alt:"App Clip Header"})],currentIndex:w,setIndex:S}))});function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function j(e,t,a,n,r,i,o){try{var l=e[i](o),s=l.value}catch(p){return void a(p)}l.done?t(s):Promise.resolve(s).then(n,r)}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(s){r=!0,i=s}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var x=["OPEN","VIEW","PLAY"],T=56,N=f.a.object().shape({subtitle:f.a.string().max(T).nullable()});function k(e){var t,a=e.appClipVersion,n=e.editedAppClipVersion,r=e.appClipVersionLocInfo,s=e.editedAppClipVersionLocInfo,c=e.appClipVersionLocErrors,m=e.editedAppClipHeaderImage,C=e.deletedAppClipHeaderImage,f=e.selectedLocaleIsCreatedAndNotSaved,_=e.currentVersionBuild,y=e.savedBuildAppClip,I=e.savedOrEditedBuildAppClip,O=e.isEditable,k=e.headerImageIsDeletable,H=e.isReadOnly,B=e.appHasAppClips,R=e.showApplyResetFromCurrent,D=e.showApplyResetFromPrevious,M=e.showConfirmMetadata,F=e.hasConfirmedMetadata,P=e.isLoading,z=e.hasError,U=L(i.a.useState([]),2),Z=U[0],J=U[1],W=i.a.useRef(null),q=R||D||M;i.a.useEffect(function(){q||J([])},[q]),i.a.useEffect(function(){f||J([])},[f]),i.a.useEffect(function(){J([])},[r]);var K=Boolean(_&&!y),Y=Boolean(I),G=!B||K&&!Y||!O||R||D||M&&!F,X={subtitle:r.subtitle};G||b()(s)||"undefined"===typeof s.subtitle||(X={subtitle:s.subtitle});var Q=a?a.invocationVerb:"NOVALUE";!G&&n.invocationVerb&&(Q=n.invocationVerb);var $=r.appClipHeaderImage;G||(m.length>0&&m[0].value&&($=m[0].value),C.length>0&&($=null));var ee=r.appClipHeaderImageErrors,te=void 0===ee?[]:ee,ae=Object(v.a)({mode:"onChange",submitFocusError:!1,validationSchema:N,defaultValues:X,originalState:r,onUpdate:e.onEditSubtitle,serverSideErrors:c}),ne=i.a.useCallback(function(){var t,a=(t=d.a.mark(function t(a){var n,r,i,o,l,s,p;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(J([]),!f){t.next=4;break}return J([{id:"ITC.apps.clips.asc.AppClipSection.HeaderImage.SaveLocaleBeforeUpload"}]),t.abrupt("return");case 4:if(!q){t.next=7;break}return J([{id:"ITC.apps.clips.asc.AppClipSection.HeaderImage.SaveChangesBeforeUpload"}]),t.abrupt("return");case 7:if(!(a&&a.length>0)){t.next=24;break}if(n=a[0],/(jpg|jpeg|png)/.test(n.type)){t.next=12;break}return J([{id:"ITC.AppVersion.Media.ErrorMessages.WrongFileType"}]),t.abrupt("return");case 12:return r=URL.createObjectURL(n),t.next=15,Object(h.c)(r).catch(function(){});case 15:if(i=t.sent,o=i.width,l=void 0===o?1800:o,s=i.height,p=void 0===s?1200:s,1800===l&&1200===p){t.next=23;break}return J([{id:"ITC.apps.clips.asc.AppClipSection.HeaderImage.WrongImageDimensions",html:!0}]),t.abrupt("return");case 23:e.onAddHeaderImage({assetToken:r,imgSrc:r,width:l,height:p,fileName:n.name,fileSize:n.size,type:n.type});case 24:case"end":return t.stop()}},t,this)}),function(){var e=this,a=arguments;return new Promise(function(n,r){var i=t.apply(e,a);function o(e){j(i,n,r,o,l,"next",e)}function l(e){j(i,n,r,o,l,"throw",e)}o(void 0)})});return function(e){return a.apply(this,arguments)}}(),[f,q]);var re=c.appClipHeaderImage?[{id:c.appClipHeaderImage}]:[],ie=Z.concat(re),oe=ie.length>0&&i.a.createElement("div",{className:"tippy-container___rCRHz"},i.a.createElement(V.a,{interactive:!0,showOnCreate:!0,errors:ie,offset:[15,10]},i.a.createElement("span",null,i.a.createElement(p.a,{iconName:"alert",className:"image-error-icon___1wzKZ"})))),le=c&&c.invocationVerb,se=le&&i.a.createElement("div",{className:"tippy-container___rCRHz"},i.a.createElement(V.a,{interactive:!0,showOnCreate:!0,errors:[{id:c.invocationVerb}]},i.a.createElement("span",null,i.a.createElement(p.a,{iconName:"alert",className:"image-error-icon___1wzKZ action-error___cMgiB"})))),pe=E()((S(t={"tb-panel tb-bg--gray-xtra-lght panel":!0,isLoading:P},A.a["read-only"],H),S(t,"disabled-panel",G),S(t,A.a["panel-error"],ie.length>0),t)),ce=Object(o.f)(function(){return i.a.createElement("div",null,P&&i.a.createElement("select",{disabled:!0},i.a.createElement("option",{value:"",defaultValue:!0},Object(o.d)("app-store","ITC.Account.Search.Loading"))),!P&&i.a.createElement("select",{id:"invocationVerb",htmlFor:"invocationVerb",name:"invocationVerb",disabled:G,onChange:function(t){return e.onEditInvocationVerb({invocationVerb:t.target.value})},value:Q||"NOVALUE",className:le?"tb-form__input--error":""},i.a.createElement("option",{disabled:!0,value:"NOVALUE",defaultValue:!0},Object(o.d)("app-store","ITC.Choose.label")),x.map(function(e){return i.a.createElement("option",{key:e,value:e},Object(o.d)("app-store","ITC.apps.clips.asc.AppClipSection.InvocationVerb.".concat(e)))})))}),de=!G&&!H,ue=de&&k&&!q;return i.a.createElement("div",{className:"app-clip-form___1eHB3"},i.a.createElement(l.h,{loading:!1,error:z,allowChildrenWhileLoading:!0,allowChildrenOnError:!1},i.a.createElement("div",{className:"form-wrapper___3PCM7"},i.a.createElement("div",{className:"section___J3t0e"},i.a.createElement(l.r,{labelLocKey:"ITC.apps.clips.asc.AppClipSection.HeaderImage.label",extraAction:oe}),!$&&i.a.createElement(l.p,{isEditable:de,onAddFiles:ne,className:pe,draggingClassName:A.a.dragging},!P&&i.a.createElement("div",{className:"panelContent"},i.a.createElement("p",null,i.a.createElement(o.b,{id:"ITC.apps.clips.asc.AppClipSection.HeaderImage.text"})),!H&&i.a.createElement(i.a.Fragment,null,i.a.createElement("input",{type:"file",id:"appClipHeaderImage",ref:W,onChange:function(e){e.target.files.length>0&&ne(e.target.files)}}),i.a.createElement(l.j,{disabled:G,onClick:function(){W.current.dispatchEvent(new MouseEvent("click"))}},i.a.createElement("h5",null,i.a.createElement(o.c,{id:"ITC.apps.clips.asc.AppClipSection.HeaderImage.Upload.label"})))))),$&&i.a.createElement(w,Object.assign({},$,{saveErrors:te,isEditable:ue,isLocked:R||D||M&&!F,onDelete:function(){return e.onDeleteHeaderImage($)}}))),i.a.createElement("div",{className:"section___J3t0e"},i.a.createElement(u.a,ae,i.a.createElement(g.b,{name:"subtitle",label:i.a.createElement(o.c,{id:"ITC.apps.clips.asc.AppClipSection.Subtitle.label"}),infoText:i.a.createElement(o.b,{id:"ITC.apps.clips.asc.AppClipSection.Subtitle.tooltipText"}),charMax:T,type:"text",charLength:ae.watch("subtitle"),disabled:P||G,readOnly:H})),i.a.createElement(l.r,{labelLocKey:"ITC.apps.clips.asc.AppClipSection.Action.label",labelfield:"invocationVerb",popoverInfoLocKey:"ITC.apps.clips.asc.AppClipSection.Action.tooltipText",position:"frombottom",extraAction:se}),H?i.a.createElement("p",null,Q&&i.a.createElement(o.c,{id:"ITC.apps.clips.asc.AppClipSection.InvocationVerb.".concat(Q)})||"\u2013"):i.a.createElement(ce,null)))))}k.displayName="AppClipForm",k.defaultProps={appClipVersionLocInfo:{subtitle:null},editedAppClipVersionLocInfo:{},appClipVersionLocErrors:{},editedAppClipHeaderImage:[],deletedAppClipHeaderImage:[],appClipVersion:null,editedAppClipVersion:{},isEditable:!1,headerImageIsDeletable:!1,isReadOnly:!1,appHasAppClips:!1,buildHasNewAppClip:!1,selectedLocaleIsCreatedAndNotSaved:!1};a("yZlX");function H(e){var t=e.appClipsLoading,a=e.appClipVersionLoading,n=e.previousStoreVersionClipVersionLoading,r=e.appClipLocalizationsLoading,c=e.appClipVersionError,d=e.appClipLocalizationsError,u=e.appHasAppClips,m=e.currentVersionBuild,b=e.savedBuildAppClip,C=e.savedOrEditedBuildAppClip,E=e.isRFS,f=e.isReadOnly,g=e.adamId,v=e.versionId,_=e.appClipVersion,A=e.isLoadingDrafts,h=e.appClipVersionDraft,V=e.previousAppClipVersion,y=e.previousStoreVersionClipVersion,I=e.showApplyResetFromCurrent,O=e.showApplyResetFromPrevious,w=e.showConfirmMetadata,S=e.hasAppliedOrResetMetadata,j=e.hasConfirmedMetadata,L=Boolean(b),x=Boolean(C),T=Boolean(m)&&!b;if(E&&!L)return null;var N=I||O,H=null;I&&_?H=_.id:O&&V?H=V.id:O&&y&&(H=y.id);var B=f||!u||N||w&&!j||T&&!x,R=t||a||r||A||n,D=c||d;return i.a.createElement("div",{className:"app-clip-section___3ZAm7"},i.a.createElement(l.b,{expand:L||x||_||N||w},i.a.createElement(l.a.Toggle,{style:{marginBottom:0}},i.a.createElement("h3",{style:{marginBottom:"0"}},i.a.createElement(o.c,{id:"ITC.apps.clips.asc.AppClipSection.title"}))),i.a.createElement(l.a.Content,null,i.a.createElement("p",null,i.a.createElement(o.b,{id:"ITC.apps.clips.asc.AppClipSection.text"})),!D&&!R&&N&&S&&i.a.createElement(l.c,{inline:!0,type:"warning",messages:[i.a.createElement(o.b,{id:"ITC.apps.clips.asc.AppClipSection.SaveChangesBanner.text"})]}),!D&&!R&&!u&&i.a.createElement(l.c,{inline:!0,type:"warning",messages:[i.a.createElement(o.b,{id:"ITC.apps.clips.asc.AppClipSection.NoClipsBanner.text"})]}),!D&&!R&&w&&!j&&i.a.createElement(l.c,{inline:!0,type:"warning",messages:[i.a.createElement("div",{className:"inline-banner___NkAOV"},i.a.createElement("div",null,i.a.createElement("p",null,i.a.createElement(o.b,{id:"ITC.apps.clips.asc.AppClipSection.ConfirmMetadataBanner.text"}))),i.a.createElement("div",null,i.a.createElement(s.a,{type:"secondary",onClick:function(){return e.confirmClipVersionDraft(h.id)}},i.a.createElement(o.c,{id:"ITC.Confirm.Button"}))))],includeHtmlWrapper:!1}),!D&&!R&&N&&!S&&i.a.createElement(l.c,{inline:!0,type:"warning",messages:[i.a.createElement("div",{className:"inline-banner___NkAOV"},i.a.createElement("div",null,i.a.createElement("p",null,i.a.createElement(o.b,{id:"ITC.apps.clips.asc.AppClipSection.NewAppClipBanner.text"}))),i.a.createElement("div",null,i.a.createElement(s.a,{type:"secondary",onClick:function(){return e.applyExistingClipVersion(H)}},i.a.createElement(o.c,{id:"ITC.Apply.button"})),i.a.createElement(s.a,{type:"alert-quiet",onClick:e.resetClipVersion},i.a.createElement(o.c,{id:"ITC.Reset.button"}))))],includeHtmlWrapper:!1}),i.a.createElement(k,Object.assign({},e,{isLoading:R,hasError:D})),i.a.createElement("h4",null,i.a.createElement(o.c,{id:"ITC.apps.clips.asc.AppClipSection.AdvancedExperiences.title"})),i.a.createElement("p",null,i.a.createElement(o.b,{id:"ITC.apps.clips.asc.AppClipSection.AdvancedExperiences.text"})),i.a.createElement(s.a,{onClick:B?void 0:function(){var e="/appclips/ui/get-started?adamId=".concat(g,"&version=").concat(v);L?e+="&bundleId=".concat(b.bundleId):x&&(e+="&bundleId=".concat(C.bundleId)),window.location.assign("".concat(window.location.origin).concat(e))},className:"advanced-button___lVq3_",type:B?"disabled-quiet":"secondary"},i.a.createElement(o.c,{id:"ITC.apps.clips.asc.AppClipSection.AdvancedExperiences.Edit.button"})," ",i.a.createElement(p.a,{iconName:"arrow-up-right"})))),i.a.createElement(l.n,{style:{margin:"30px 0"}}))}H.displayName="AppClip",H.defaultProps={appClipsLoading:!1,appHasAppClips:!1,savedBuildHasAppClip:!1,isRFS:!1,isReadOnly:!1};var B=a("U4hN"),R=a("S49n"),D=a("TlNo"),M=a("9JDA");function F(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.default=Object(n.connect)(function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){F(e,t,a[t])})}return e}({appClipVersion:Object(R.f)(e.storeVersions),editedAppClipVersion:Object(B.x)(e.storeVersions,M.b),appClipVersionLocInfo:Object(R.o)(e.storeVersions),editedAppClipVersionLocInfo:Object(R.g)(e.storeVersions),editedAppClipHeaderImage:Object(B.C)({sectionPath:M.b,syncAction:"CREATE_HEADER_IMAGE"})(e.storeVersions),deletedAppClipHeaderImage:Object(B.C)({sectionPath:M.b,syncAction:"DELETE_HEADER_IMAGE"})(e.storeVersions),appClipVersionLocErrors:Object(B.B)(e.storeVersions,M.b)},e.storeVersions[M.b].meta,{currentVersion:Object(B.p)(e.storeVersions),appClipsLoading:Object(R.c)(e.storeVersions),appHasAppClips:Object(R.e)(e.storeVersions),currentVersionBuild:Object(B.r)(e.storeVersions),savedBuildAppClip:Object(R.r)(e.storeVersions),savedOrEditedBuildAppClip:Object(R.v)(e.storeVersions),isLoadingDrafts:Object(R.n)(e.storeVersions),showApplyResetFromCurrent:Object(R.s)(e.storeVersions),showApplyResetFromPrevious:Object(R.t)(e.storeVersions),showConfirmMetadata:Object(R.u)(e.storeVersions),appClipVersionDraft:Object(R.a)(e.storeVersions),previousAppClipVersion:Object(R.p)(e.storeVersions),previousStoreVersionClipVersion:Object(R.q)(e.storeVersions),hasAppliedOrResetMetadata:Object(R.l)(e.storeVersions),hasConfirmedMetadata:Object(R.m)(e.storeVersions),isEditable:Object(B.tb)(e.storeVersions),headerImageIsDeletable:Object(B.hb)(e.storeVersions),isReadOnly:Object(B.ub)(e.storeVersions),isRFS:Object(B.t)(e.storeVersions),selectedLocaleIsCreatedAndNotSaved:Object(B.lb)(e.storeVersions),adamId:e.appStore.app.id,versionId:Object(B.s)(e.storeVersions)})},D)(H)},YajT:function(e,t,a){e.exports={"header-image-mask":"header-image-mask___2CFnL","delete-icon-area":"delete-icon-area___1t3uI","delete-button":"delete-button___1_avf"}},uDEQ:function(e,t,a){e.exports={mediaLargeWidth:"1068px",mediaMediumWidth:"736px",stickyTopLarge:"50px",stickyTopMedium:"64px",stickyTopSmall:"54px","app-clip-form":"app-clip-form___1eHB3","form-wrapper":"form-wrapper___3PCM7",section:"section___J3t0e","image-error-icon":"image-error-icon___1wzKZ","action-error":"action-error___cMgiB",dragging:"dragging___3qv7k","read-only":"read-only___3DrjM","panel-error":"panel-error___kQVZ1","tippy-container":"tippy-container___rCRHz"}},yZlX:function(e,t,a){e.exports={"app-clip-section":"app-clip-section___3ZAm7","advanced-button":"advanced-button___lVq3_","inline-banner":"inline-banner___NkAOV"}}}]);